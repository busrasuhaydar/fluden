<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Piano Fluid Pouring</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000;
            width: 100%;
            height: 100%;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
<canvas id="glcanvas"></canvas>
<script>
    const canvas = document.getElementById('glcanvas');
    const ctx = canvas.getContext('2d');
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    // Her tuş için ana renkler
    const keyColors = {
        'C': [{r: 255, g: 0, b: 0}], 
        'D': [{r: 0, g: 255, b: 0}],
        'E': [{r: 0, g: 0, b: 255}],
        'F': [{r: 255, g: 255, b: 0}],
        'G': [{r: 0, g: 255, b: 255}],
        'A': [{r: 255, g: 0, b: 255}],
        'B': [{r: 255, g: 128, b: 0}]
    };

    function randomChoice(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    // Mouse tabanlı sürükleme için basit fluid
    function createFluid(startX, startY, colors) {
        let step = 0;
        const maxSteps = 300;
        let x = startX;
        let y = startY;
        let colorIndex = 0;

        // Başlangıç rengi
        ctx.fillStyle = `rgb(${colors[0].r},${colors[0].g},${colors[0].b})`;

        function drawStep() {
            if (step > maxSteps) return;

            // Spiral ve rastgele dalgalanma
            const angle = step * 0.2;
            const radius = 20 + step * 0.5;
            const dx = radius * Math.cos(angle) * (Math.random()*0.5+0.75);
            const dy = radius * Math.sin(angle) * (Math.random()*0.5+0.75);

            x += dx * (Math.random()*0.5 + 0.75);
            y += dy * (Math.random()*0.5 + 0.75);

            // Tuval sınırları
            if (x < 0) x = 0;
            if (x > width) x = width;
            if (y < 0) y = 0;
            if (y > height) y = height;

            // Keskin renk değişimi: her 15 adımda
            if (step % 15 === 0) {
                colorIndex = (colorIndex + 1) % colors.length;
                const c = colors[colorIndex];
                ctx.fillStyle = `rgb(${c.r},${c.g},${c.b})`;
            }

            ctx.beginPath();
            ctx.arc(x, y, Math.random()*10+15, 0, Math.PI*2);
            ctx.fill();

            step++;
            requestAnimationFrame(drawStep);
        }

        drawStep();
    }

    // Piyano tuşuna basma simülasyonu
    function playKey(key) {
        const colors = keyColors[key] || [{r:255,g:255,b:255}];
        const startX = Math.random()*width;
        const startY = Math.random()*height;
        const numFluids = 3 + Math.floor(Math.random()*3);

        for (let i=0; i<numFluids; i++) {
            setTimeout(() => createFluid(startX, startY, colors), i*60);
        }
    }

    // Test için rastgele tuş basmaları
    const keys = Object.keys(keyColors);
    setInterval(() => {
        const key = randomChoice(keys);
        playKey(key);
    }, 800);

    // Yeniden boyutlama
    window.addEventListener('resize', () => {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    });
</script>
</body>
</html>
