<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Renk SeÃ§ici</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            gap: 20px;
        }

        .panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 350px;
            height: fit-content;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .current-key {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        .current-key-label {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .current-key-name {
            font-size: 32px;
            font-weight: bold;
        }

        .color-count {
            font-size: 14px;
            margin-top: 5px;
            opacity: 0.9;
        }

        .color-picker-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .color-input-wrapper {
            flex: 1;
            position: relative;
        }

        input[type="color"] {
            width: 100%;
            height: 50px;
            border: 3px solid #667eea;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        input[type="color"]:hover {
            transform: scale(1.05);
        }

        .add-color-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .add-color-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .add-color-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .selected-colors {
            margin-bottom: 20px;
        }

        .selected-colors-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .color-list {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            max-height: 200px;
            overflow-y: auto;
            padding: 5px;
        }

        .color-item {
            position: relative;
            width: 100%;
            padding-bottom: 100%;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid rgba(0,0,0,0.1);
        }

        .color-item:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .color-item-inner {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-color {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            color: #ff4757;
            border: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
        }

        .color-item:hover .remove-color {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .undo-btn {
            background: #ffa502;
            color: white;
        }

        .undo-btn:hover {
            background: #ff7f00;
        }

        .next-key-btn {
            background: #2ed573;
            color: white;
        }

        .next-key-btn:hover {
            background: #26de81;
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .export-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }

        .export-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4);
        }

        .keys-list {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow-y: auto;
            max-height: calc(100vh - 40px);
        }

        .keys-list-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .key-entry {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .key-entry.active {
            border-color: #667eea;
            background: #e8eaf6;
        }

        .key-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .key-name {
            font-weight: bold;
            font-size: 18px;
            color: #333;
        }

        .key-color-count {
            color: #667eea;
            font-size: 14px;
        }

        .key-colors {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .key-color-dot {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            border: 2px solid rgba(0,0,0,0.1);
        }

        .output-area {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .copy-btn {
            margin-top: 10px;
            width: 100%;
            padding: 10px;
            background: #5f27cd;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        .copy-btn:hover {
            background: #341f97;
        }

        .instructions {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 13px;
            line-height: 1.6;
            color: #856404;
        }

        .instructions strong {
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="panel">
        <div class="title">ðŸŽ¹ Piyano Renk SeÃ§ici</div>
        
        <div class="instructions">
            <strong>NasÄ±l KullanÄ±lÄ±r:</strong><br>
            1. DamlalÄ±k ile PNG'den renk seÃ§<br>
            2. "Renk Ekle" ile listeye ekle (max 10)<br>
            3. YanlÄ±ÅŸ renk varsa Ã¼zerine tÄ±kla<br>
            4. "Sonraki TuÅŸ" ile ilerle<br>
            5. TamamlayÄ±nca "JSON Ä°ndir" ðŸ“¥
        </div>

        <div class="current-key">
            <div class="current-key-label">Åžu Anki TuÅŸ</div>
            <div class="current-key-name" id="currentKeyName">C</div>
            <div class="color-count"><span id="colorCount">0</span> / 10 renk</div>
        </div>

        <div class="color-picker-container">
            <div class="color-input-wrapper">
                <input type="color" id="colorPicker" value="#ff69b4">
            </div>
            <button class="add-color-btn" id="addColorBtn">
                Renk Ekle
            </button>
        </div>

        <div class="selected-colors">
            <div class="selected-colors-title">SeÃ§ilen Renkler</div>
            <div class="color-list" id="colorList"></div>
        </div>

        <div class="actions">
            <button class="action-btn undo-btn" id="undoBtn" disabled>
                â†¶ Geri Al
            </button>
            <button class="action-btn next-key-btn" id="nextKeyBtn">
                Sonraki TuÅŸ â†’
            </button>
        </div>

        <div class="export-section">
            <button class="export-btn" id="exportBtn">
                ðŸ“¥ JSON Ä°ndir (TÃ¼m Renkler)
            </button>
            <div class="output-area" id="outputArea"></div>
            <button class="copy-btn" id="copyBtn" style="display: none;">
                ðŸ“‹ Kopyala
            </button>
        </div>
    </div>

    <div class="keys-list">
        <div class="keys-list-title">ðŸŽ¼ TÃ¼m TuÅŸlar</div>
        <div id="keysListContainer"></div>
    </div>

    <script>
        // TÃ¼m piyano tuÅŸlarÄ±
        const PIANO_KEYS = [
            'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B',
            'C2', 'C#2', 'D2', 'D#2', 'E2', 'F2', 'F#2', 'G2', 'G#2', 'A2', 'A#2', 'B2',
            'C3'
        ];

        let currentKeyIndex = 0;
        let keyColors = {};
        let history = [];

        // Her tuÅŸ iÃ§in boÅŸ array oluÅŸtur
        PIANO_KEYS.forEach(key => {
            keyColors[key] = [];
        });

        const colorPicker = document.getElementById('colorPicker');
        const addColorBtn = document.getElementById('addColorBtn');
        const undoBtn = document.getElementById('undoBtn');
        const nextKeyBtn = document.getElementById('nextKeyBtn');
        const exportBtn = document.getElementById('exportBtn');
        const copyBtn = document.getElementById('copyBtn');
        const colorList = document.getElementById('colorList');
        const currentKeyName = document.getElementById('currentKeyName');
        const colorCount = document.getElementById('colorCount');
        const outputArea = document.getElementById('outputArea');
        const keysListContainer = document.getElementById('keysListContainer');

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function updateUI() {
            const currentKey = PIANO_KEYS[currentKeyIndex];
            const colors = keyColors[currentKey];

            currentKeyName.textContent = currentKey;
            colorCount.textContent = colors.length;

            // Renk listesini gÃ¼ncelle
            colorList.innerHTML = '';
            colors.forEach((color, index) => {
                const colorItem = document.createElement('div');
                colorItem.className = 'color-item';
                colorItem.innerHTML = `
                    <div class="color-item-inner" style="background: ${color.hex}">
                        <button class="remove-color">Ã—</button>
                    </div>
                `;
                colorItem.querySelector('.remove-color').onclick = () => removeColor(index);
                colorList.appendChild(colorItem);
            });

            // ButonlarÄ± gÃ¼ncelle
            addColorBtn.disabled = colors.length >= 10;
            undoBtn.disabled = history.length === 0;

            // TuÅŸ listesini gÃ¼ncelle
            updateKeysList();
        }

        function updateKeysList() {
            keysListContainer.innerHTML = '';
            PIANO_KEYS.forEach((key, index) => {
                const colors = keyColors[key];
                const entry = document.createElement('div');
                entry.className = 'key-entry' + (index === currentKeyIndex ? ' active' : '');
                
                const colorsHTML = colors.map(c => 
                    `<div class="key-color-dot" style="background: ${c.hex}"></div>`
                ).join('');

                entry.innerHTML = `
                    <div class="key-entry-header">
                        <div class="key-name">${key}</div>
                        <div class="key-color-count">${colors.length} renk</div>
                    </div>
                    <div class="key-colors">${colorsHTML || '<span style="color: #999; font-size: 12px;">HenÃ¼z renk seÃ§ilmedi</span>'}</div>
                `;
                
                entry.onclick = () => {
                    currentKeyIndex = index;
                    updateUI();
                };
                
                keysListContainer.appendChild(entry);
            });
        }

        function addColor() {
            const currentKey = PIANO_KEYS[currentKeyIndex];
            const colors = keyColors[currentKey];
            
            if (colors.length >= 10) return;

            const hex = colorPicker.value;
            const rgb = hexToRgb(hex);

            // History'ye ekle
            history.push({
                key: currentKey,
                action: 'add',
                color: { hex, rgb }
            });

            colors.push({ hex, rgb });
            updateUI();
        }

        function removeColor(index) {
            const currentKey = PIANO_KEYS[currentKeyIndex];
            const colors = keyColors[currentKey];
            const removedColor = colors[index];

            // History'ye ekle
            history.push({
                key: currentKey,
                action: 'remove',
                index: index,
                color: removedColor
            });

            colors.splice(index, 1);
            updateUI();
        }

        function undo() {
            if (history.length === 0) return;

            const lastAction = history.pop();
            const colors = keyColors[lastAction.key];

            if (lastAction.action === 'add') {
                colors.pop();
            } else if (lastAction.action === 'remove') {
                colors.splice(lastAction.index, 0, lastAction.color);
            }

            updateUI();
        }

        function nextKey() {
            if (currentKeyIndex < PIANO_KEYS.length - 1) {
                currentKeyIndex++;
                updateUI();
            }
        }

        function exportColors() {
            const data = {};
            
            PIANO_KEYS.forEach(key => {
                data[key] = keyColors[key].map(c => c.rgb);
            });

            const json = JSON.stringify(data, null, 2);
            
            // JSON'u gÃ¶ster
            outputArea.textContent = json;
            copyBtn.style.display = 'block';

            // JSON dosyasÄ± olarak indir
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'piano-colors.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            navigator.clipboard.writeText(outputArea.textContent);
            copyBtn.textContent = 'âœ… KopyalandÄ±!';
            setTimeout(() => {
                copyBtn.textContent = 'ðŸ“‹ Kopyala';
            }, 2000);
        }

        // Event listeners
        addColorBtn.onclick = addColor;
        undoBtn.onclick = undo;
        nextKeyBtn.onclick = nextKey;
        exportBtn.onclick = exportColors;
        copyBtn.onclick = copyToClipboard;

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') addColor();
            if (e.key === 'ArrowRight') nextKey();
            if (e.ctrlKey && e.key === 'z') undo();
        });

        // Ä°lk yÃ¼kleme
        updateUI();
    </script>
</body>
</html>
